<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AHHFAKJUICE</title>

  <!-- FIXED: public/css jadi /css -->
  <link rel="stylesheet" href="css/main.css">

  <!-- FIXED: data-client-key harus diisi -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    </head>

    <body>
    <div id="page" class="site page-single">

    <aside class="site-off desktop-hide">
        <div class="off-canvas">
            <div class="canvas-head flexitem">
                <div class="logo">
                    <a href="/">
                        <img src="assets/logo/AHHFAK ELIQUID FACTORY-12.png" class="custom-logo-big" alt="AHHFAK Logo" />
                    </a>
                    </div>
                <a href="#" class="t-close flexcenter"><i class=" ri-close-line"></i></a>
            </div>
            <div class="departments"></div>
            <nav></nav>
            <div class="thetop-nav"></div>
        </div>
    </aside>

    <header>
    <div class="header-top mobile-hide">
            <div class="container">
                <div class="wrapper flexitem">
                    <div class="left">
                        <ul class="flexitem main-links">
                            <li><a href="#"></a></li>
                            <li><a href="#"></a></li>
                        </ul>
                    </div>
                    <div class="right">
                        <ul class="flexitem main-links">
                            <li><a href="#"></a></li>
                                <ul>
                                    <li class="current"><a href="#"></a></li>
                                    <li class="current"><a href="#"></a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    <!-- header-top -->
    <div class="header-nav">
    <div class="container">
        <div class="wrapper flexitem">
            <a href="#" class="trigger desktop-hide"><span class="i ri-menu-2-line"></span></a>
            <div class="left flexitem">
                <div class="logo">
                    <a href="/index.html">
                        <img src="assets/logo/Logo - edit - black-03.png" alt="" />
                        <!-- <img src="public/assets/logo/LOGO FAITH hitam-03.png"  alt="" /> -->
                        </a>
                    </div>
                <nav class="mobile-hide">
                    <ul class="flexitem second-links">
                        <li><a href="/index.html" class="active">Home</a></li>
                        <li><a href="public/view all brands.html">Semua Produk</a></li>
                        <li class="has-child">
                            <a href="#">Kategori Produk
                                <div class="icon-small"><i class="ri-arrow-down-s-line"></i></div>
                            </a>
                        <div class="mega">
                        <div class="container">
                            <div class="wrapper">
                                <div class="flexcol">
                                    <div class="row">
                                        <h4>Fruity Madness</h4>
                                        <ul>
                                            <li><a href="/public/page-single-mango.html">Sweet Mango</a></li>
                                            <li><a href="/public/page-single-lychee.html">Push Pop Lychee</a></li>
                                            <li><a href="/public/page-single-grape.html">Grape Delight</a></li>
                                            <li><a href="/public/page-single-melon.html">Mighty Melon</a></li>
                                            <li><a href="/public/page-single-lemon.html">Lemon Splash</a></li>
                                            <li><a href="/public/page-single-straw.html">Happy Strawberry</a></li>
                                            <li><a href="/public/page-single-guava.html">Guava Bliss</a></li>
                                            <li><a href="/public/page-single-apple.html">Lush Apple</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flexcol">
                                    <div class="row">
                                        <h4>Faith Series</h4>
                                        <ul>
                                            <li><a href="/public/page-single-faith-straw.html">Strawberry Jam</a></li>
                                            <li><a href="/public/page-single-faith-banana.html">Banana Peanut Buuter</a></li>
                                            <li><a href="/public/page-single-faith-vanilla.html">Vanilla Tobacco</a></li>
                                            <li><a href="/public/page-single-faith-whisky.html">Scotch Whisky</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flexcol">
                                    <div class="row">
                                        <h4>CHZ & SMITH Series</h4>
                                        <ul>
                                            <li><a href="/public/page-single-chz-straw.html">Strawbery Cheesecake</a></li>
                                            <li><a href="/public/page-single-chz-blue.html">Blueberry Cheesecake</a></li>
                                            <li><a href="/public/page-single-smith-sundae.html">Sundae Ice Cream</a></li>
                                            <li><a href="/public/page-single-smith-mango.html">Sour Mango</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flexcol">
                                    <div class="row">
                                        <h4>Creamy Series</h4>
                                        <ul class="liquid-series">
                                            <li><a href="/public/page-single-creamy-blk.html">Berry Laker Kreme</a></li>
                                            <li><a href="/public/page-single-creamy-mac.html">Coffe Cream Machito</a></li>
                                            <li><a href="/public/page-single-creamy-brax.html">Knusprig Biscuit</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="flexcol">
                                    <div class="row">
                                        <h4>Milky Madness</h4>
                                        <ul>
                                            <li><a href="#">Coming Soon</a></li>
                                            <li><a href="#">Coming Soon</a></li>
                                            <li><a href="#">Coming Soon</a></li>
                                            <li><a href="#">Coming Soon</a></li>
                                        </ul>
                                        <a href="/public/view all brands.html" class="view-all">View all brands <i class="ri-arrow-right-line"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                    <li><a href="https://wa.link/rm64ko">Order Tracking</a></li>
                    <li><a href="https://wa.link/rm64ko">Contact Us</a></li>
                            </nav>
                        </div>
                        <div class="right">
                            <ul class="flexitem second-links">
                                <li class="mobile-hide"><a href="/login.html">
                                    <div class="icon-large"><i class="fa-duotone fa-solid fa-user"></i></i></div>
                                </a>
                            </li>
                               <!-- Cart Icon -->
                                <li class="iscart">
                                <a href="#" onclick="openCart(event)">
                                    <div class="icon-large">
                                    <i class="ri-shopping-cart-2-fill"></i>
                                    <div class="fly-item">
                                        <span class="item-number" id="cartCount">0</span>
                                    </div>
                                    </div>
                                </a>
                                </li>

                                <!-- Cart Overlay -->
                                <div id="cartOverlay" class="cart-overlay">
                                <button onclick="closeCart()" class="close-btn">&times;</button>
                                <div class="cart-content">
                                    <h2>Keranjang</h2>

                                    <!-- Tempat isi produk -->
                                    <div id="cartList"></div>

                                    <!-- Total dan tombol -->
                                    <div class="cart-summary">
                                    <p><strong>Total:</strong> <span id="cartOverlayTotal">Rp 0</span></p>
                                    <a href="cart.html" class="btn-checkout">Lanjut ke Checkout</a>
                                    </div>
                                </div>
                                </div>

                            <div class="mini-cart">
                                <div class="content">
                                    <div class="cart-head">
                                        Belum ada product di keranjang
                                    </div>
                                    <div class="cart-body">
                                        <ul class="products mini">
                                            <li class="item">
                                            </li>
                                        </ul>
                                    </div>
                                        <div class="actions">
                                            <a href="/public/cart.html" class="primary-button">Checkout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>    
    </header>
    <!-- header -->

                <main>
                    <div class="section">
                        <div class="row">
                            <div class="cat-head">
                                <div class="breadcrumb">
                                    <ul class="flexitem">
                                    </ul>
                                </div>
                                <div class="page-title">
                                    <h1>AHHFAK E-LIQUID FACTORY</h1>
                                </div>
                                <div class="cat-description">
                                    <p>
                                    Didirikan pada tahun 2016 dan berbasis di Ponorogo, Jawa Timur, <strong>AHHFAK JUICE</strong> adalah perusahaan manufaktur e-liquid yang telah dipercaya oleh ribuan pelanggan di seluruh Indonesia.
                                    Kami dikenal dengan kualitas rasa yang khas, proses produksi yang higienis, serta inovasi rasa yang mengikuti tren pasar vape yang dinamis.
                                    </p>
                                    <p>
                                    Dengan pengalaman lebih dari 8 tahun, kami mengedepankan konsistensi, keamanan bahan baku, dan kepuasan pelanggan dalam setiap botol yang kami hasilkan.
                                    </p>

                                    <h3>Layanan Maklon / OEM</h3>
                                    <p>
                                    Selain memproduksi produk dengan merek sendiri, <strong>AHHFAK JUICE</strong> juga menyediakan layanan maklon atau OEM (Original Equipment Manufacturer) bagi Anda yang ingin memiliki brand e-liquid sendiri.
                                    </p>
                                    <p>Kami siap membantu mulai dari:</p>
                                    <ul style="padding-left: 1.5rem;">
                                    <li> Riset dan pengembangan rasa</li>
                                    <li> Desain kemasan dan branding</li>
                                    <li> Proses legalitas (jika diperlukan)</li>
                                    <li> Produksi skala kecil hingga besar</li>
                                    </ul>
                                    <p>
                                    Dengan pengalaman dan fasilitas produksi yang kami miliki, <strong>AHHFAK JUICE</strong> siap menjadi mitra strategis Anda dalam menciptakan produk e-liquid berkualitas.
                                    </p>
                                </div>
                                </div>
                            </main>
    <div class="footer-info">
    <div class="container">
        <div class="wrapper">
            <div class="flexcol">
                <div class="logo">
                    <a href="index.html"><span class="circle"></span>AHHFAKJUICE</a>
                </div>
                <div class="socials">
                    <ul class="flexitem">
                        <li><a href="https://wa.link/rm64ko"><i class="ri-whatsapp-line"></i></a></li>
                        <li><a href="https://www.instagram.com/ahhfakjuice?igsh=N3lrOWNrZWRvaWtq"><i class="ri-instagram-line"></i></a></li>
                        <li><a href="https://www.tiktok.com/@ahhfakjuice.idn?_t=ZS-8xSbbp8MYsx&_r=1"><i class="ri-tiktok-fill"></i></a></li>
                    </ul>
                </div>
            </div>
            <p class="mini-text">Copyright 2025 © .AHHFAK E-LIQUID FACTORY. All right reserved.</p>
        </div>
    </div>
    </div>
    </footer>
    <!-- footer -->
    <div class="search-bottom desktop-hide">
    <div class="container">
    <div class="wrapper">

        <form action="" class="search">
            <a href="#" class="t-close search-close flexcenter"><i class="ri-close-line"></i></a>
            <span class="icon-large"><i class="ri-search-line"></i></span>
            <input type="search" placeholder="Your email address" required>
            <button class="submit">Search</button>
        </form>
    </div>
    </div>
    </div>
 
    <script>
    // ✅ Format angka ke Rupiah
    function formatRupiah(number) {
    return new Intl.NumberFormat("id-ID", {
        style: "currency",
        currency: "IDR",
        minimumFractionDigits: 0,
    }).format(number);
    }

    // ✅ Ambil isi cart dari localStorage
    function getCart() {
    try {
        return JSON.parse(localStorage.getItem("cartItems")) || [];
    } catch (e) {
        console.error("Gagal membaca cartItems:", e);
        return [];
    }
    }

    // ✅ Simpan cart ke localStorage
    function saveCart(cartItems) {
    localStorage.setItem("cartItems", JSON.stringify(cartItems));
    }

    // ✅ Update ikon cart
    function updateCartIcon() {
    const cartItems = getCart();
    let totalQty = cartItems.reduce((sum, item) => sum + parseInt(item.quantity || 0), 0);

    const cartIcon = document.querySelector(".iscart .item-number");
    if (cartIcon) {
        cartIcon.textContent = totalQty;
    }
    }

    // ✅ Tambah item ke cart
    function setupAddToCartButtons() {
    const addToCartButtons = document.querySelectorAll(".add-to-cart");

    addToCartButtons.forEach(button => {
        button.addEventListener("click", () => {
        const name = button.dataset.name?.trim();
        const price = parseInt(button.dataset.price);
        const img = button.dataset.img?.trim();
        const qtyInput = button.closest(".product-item")?.querySelector(".qty-control input");
        let quantity = parseInt(qtyInput?.value) || 1;

        if (!name || isNaN(price) || !img) {
            alert("Data produk tidak lengkap.");
            return;
        }

        if (quantity <= 0) quantity = 1;

        let cartItems = getCart();
        const existing = cartItems.find(item => item.name === name);

        if (existing) {
            existing.quantity = parseInt(existing.quantity) + quantity;
        } else {
            cartItems.push({ name, price, quantity, img });
        }

        saveCart(cartItems);
        updateCartIcon();
        updateCartInfo();
        alert(`Produk "${name}" berhasil ditambahkan ke keranjang!`);
        });
    });
    }

    // ✅ Buka cart overlay
    function openCart(event) {
    event.preventDefault();
    document.getElementById("cartOverlay").classList.add("open");
    renderCartOverlay();
    }

    // ✅ Tutup cart overlay
    function closeCart() {
    document.getElementById("cartOverlay").classList.remove("open");
    }

    // ✅ Tambah/Kurang jumlah item
    function updateQty(index, delta) {
    let items = getCart();
    if (!items[index]) return;
    items[index].quantity = Math.max(1, (items[index].quantity || 1) + delta);
    saveCart(items);
    renderCartOverlay();
    updateCartInfo();
    }

    // ✅ Hapus item dari cart
    function removeFromCart(index) {
    let items = getCart();
    items.splice(index, 1);
    saveCart(items);
    renderCartOverlay();
    updateCartInfo();
    }

    // ✅ Tampilkan isi keranjang di overlay
    function renderCartOverlay() {
    const items = getCart();
    const list = document.getElementById("cartList");
    const totalEl = document.getElementById("cartOverlayTotal");

    if (!items.length) {
        list.innerHTML = '<p style="text-align:center;">Keranjang masih kosong.</p>';
        totalEl.textContent = formatRupiah(0);
        return;
    }

    list.innerHTML = "";
    let total = 0;

    items.forEach((item, index) => {
        const subtotal = item.quantity * item.price;
        total += subtotal;

        const div = document.createElement("div");
        div.className = "cart-item";

        div.innerHTML = `
        <img src="${item.img || 'https://via.placeholder.com/60'}" alt="${item.name}">
        <div class="cart-details">
            <div class="cart-name">${item.name}</div>
            <div class="cart-actions">
            <button onclick="updateQty(${index}, -1)">−</button>
            <span>${item.quantity}</span>
            <button onclick="updateQty(${index}, 1)">+</button>
            <span class="cart-price">${formatRupiah(item.price)}</span>
            <button class="remove-btn" onclick="removeFromCart(${index})"><i class="ri-close-line"></i></button>
            </div>
        </div>
        `;
        list.appendChild(div);
    });

    totalEl.textContent = formatRupiah(total);
    }

    // ✅ Update jumlah item & total harga
    function updateCartInfo() {
    const items = getCart();
    const count = items.reduce((sum, item) => sum + (item.quantity || 0), 0);
    const total = items.reduce((sum, item) => sum + (item.quantity * item.price), 0);

    const countEl = document.getElementById("cartCount");
    const totalEl = document.getElementById("cartTotal");

    if (countEl) countEl.textContent = count;
    if (totalEl) totalEl.textContent = formatRupiah(total);
    }

    // ✅ Inisialisasi saat halaman siap
    window.addEventListener("DOMContentLoaded", () => {
    updateCartIcon();
    updateCartInfo();
    setupAddToCartButtons();

    // Fetch produk dari API
    fetch("/api/products")
        .then(res => {
        if (!res.ok) throw new Error("Gagal mengambil produk dari server.");
        return res.json();
        })
        .then(products => {
        const container = document.querySelector(".products.main.flexwrap");
        if (!container) {
            console.warn("Container .products.main.flexwrap tidak ditemukan.");
            return;
        }

        container.innerHTML = "";

        if (!Array.isArray(products) || products.length === 0) {
            container.innerHTML = "<p>Tidak ada produk tersedia.</p>";
            return;
        }

        products.reverse().forEach(product => {
            const name = product.name?.trim() || "Produk Tanpa Nama";
            const imageUrl =
            product.imageUrl ||
            (Array.isArray(product.images) ? product.images[0] : null) ||
            "assets/default.jpg";

            const slug = name.toLowerCase()
            .replace(/\s+/g, "-")
            .replace(/[^a-z0-9\-]/g, "")
            .replace(/\-+/g, "-")
            .replace(/^-+|-+$/g, "");

            const href = `page-single-liquid-${slug}.html`;

            const div = document.createElement("div");
            div.className = "item";

            div.innerHTML = `
            <div class="media">
                <div class="thumbnail object-cover">
                <a href="${href}">
                    <img src="${imageUrl}" alt="${name}" onerror="this.src='assets/default.jpg';" />
                </a>
                </div>
            </div>
            <div class="content">
                <h3><a href="${href}">${name}</a></h3>
            </div>
            `;

            container.appendChild(div);
        });
        })
        .catch(error => {
        const container = document.querySelector(".products.main.flexwrap");
        if (container) {
            container.innerHTML = `<p style="color:red;">Gagal memuat produk.</p>`;
        }
        console.error("❌ Error:", error);
        });
    });
    </script>
    
<script src="script.js"></script> 
</body>

</html>